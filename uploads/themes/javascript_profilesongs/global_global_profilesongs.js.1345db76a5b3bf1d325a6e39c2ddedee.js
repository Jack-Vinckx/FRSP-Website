;(function($,_,undefined){"use strict";ips.controller.register('profilesongs.audio',{_editTimeout:0,_editingTitle:false,initialize:function(){this.on('click','[data-role="play"]',this.play);this.on('click','[data-role="pause"]',this.pause);this.on('click','[data-role="resume"]',this.resume);this.on('click','[data-role="next"]',this.next);this.on('click','[data-role="previous"]',this.previous);this.on('click','[data-role="repeat"]',this.repeat);this.on('click','[data-role="progressbar"]',this.progressbar);this.on('click','[data-role="volume"]',this.volume);this.on('click','[data-role="volumebar"]',this.volumeset);this.on('click','[data-role="volumeup"]',this.volumeup);this.on('click','[data-role="volumedown"]',this.volumedown);this.on('click','[data-role="show_playlist"]',this.show_playlist);this.on('click','[data-role="playli"]',this.playli);this.on('click','[data-role="pauseli"]',this.pauseli);this.on('click','[data-role="resumeli"]',this.resumeli);this.on('mousedown','[data-role="editname"]',this.editname);this.on('mouseup mouseleave','[data-role="editname"]',this.editnameTimeout);this.on('click','[data-role="delete"]',this.deleteTrack);this.on('click','[data-role="changeColour"]',this.changeColour);this.on('click','[data-role="pickColour"]',this.pickColour);this.on('click','[data-role="pickColourSolid"]',this.pickColourSolid);this.on('click','[data-role="autoplay"]',this.autoplay);this.on('click','[data-role="sharing"]',this.sharing);this.on('click','[data-role="addToPlaylist"]',this.addToPlaylist);this.setup();},setup:function(){var audioElement=document.getElementById("audio-player");var timeleft=document.getElementById('currentTime');var minutes="0"+Math.floor(audioElement.currentTime / 60);var seconds="0"+Math.floor(audioElement.currentTime%60);var dur=minutes.substr(-2)+":"+seconds.substr(-2);var totalminutes="0"+Math.floor(audioElement.duration / 60);var totalseconds="0"+Math.floor(audioElement.duration%60);try{var totaldur=totalminutes.substr(-2)+":"+totalseconds.substr(-2);}
catch(err){var totaldur='00:00';}
var repeat=document.getElementById("repeat");if(localStorage.getItem('profilesongs_repeat_'+ips.getSetting('ps_member_id'))==1){repeat.style.color='#'+ips.getSetting('ps_member_colour');$('#repeat').attr('data-ipstooltip-label',ips.getString('profilesongs_repeat_track_on'));}
$('.playlist li:first-child').addClass('active');ips.loader.get(['core/interface/jquery/jquery-ui.js']).then(function(){$("#playlist").sortable({connectWith:'.playlist',containment:'.playlist',placeholder:'highlight',tolerance:'pointer',handle:'.repositionHandle',cursor:'row-resize',axis:'y',opacity:0.6,revert:true,update:function(){var order=$('#playlist').sortable('toArray').toString();var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files&do=updatePosition";ips.getAjax()(ajaxurl,{type:'post',dataType:'json',data:{order:order}})}}).disableSelection();});timeleft.innerHTML=dur+'/'+totaldur;if(ips.getSetting('ps_member_autoplay')){this.play();}},play:function(){var audioElement=document.getElementById("audio-player");audioElement.play();var icon=document.getElementById("icon");icon.setAttribute("data-role","pause");icon.classList.remove("fa-play");icon.classList.add("fa-pause");$('.fa-icon').removeClass('fa-pause');$('.fa-icon').attr("data-role","playli");$('.fa-icon[audiourl="'+audioElement.src+'"]').addClass('fa-pause');$('.fa-icon[audiourl="'+audioElement.src+'"]').attr("data-role","pauseli");$(document).trigger('contentChange',[$("#icon")]);audioElement.addEventListener('ended',function(){audioElement.pause();audioElement.currentTime=0;if(localStorage.getItem('profilesongs_repeat_'+ips.getSetting('ps_member_id'))==null&&ips.getSetting('ps_total_tracks')<2){icon.classList.remove("fa-pause");icon.classList.add("fa-play");icon.setAttribute("data-role","play");icon.style.color="";}
if(localStorage.getItem('profilesongs_repeat_'+ips.getSetting('ps_member_id'))!==null){audioElement.play();}
if(localStorage.getItem('profilesongs_repeat_'+ips.getSetting('ps_member_id'))==null&&ips.getSetting('ps_total_tracks')>1){var next=$('.playlist li.active').next();var audiotitle=document.getElementById('trackTitle');if(next.length==0){next=$('.playlist li:first-child');}
var url=next.attr('audiourl');$('.playlist li').removeClass('active');next.addClass('active');audioElement.src=url;audiotitle.innerHTML=next.attr("audiotitle");audioElement.play();}},false);audioElement.addEventListener("canplay",function(){});audioElement.addEventListener("timeupdate",function(){var timeleft=document.getElementById('currentTime');var minutes="0"+Math.floor(audioElement.currentTime / 60);var seconds="0"+Math.floor(audioElement.currentTime%60);var dur=minutes.substr(-2)+":"+seconds.substr(-2);var totalminutes="0"+Math.floor(audioElement.duration / 60);var totalseconds="0"+Math.floor(audioElement.duration%60);var totaldur=totalminutes.substr(-2)+":"+totalseconds.substr(-2);timeleft.innerHTML=dur+'/'+totaldur;var progress=document.getElementById("progress");var increment=10/audioElement.duration
var percent=Math.min(increment*audioElement.currentTime*10,100);progress.style.width=percent+'%';});},pause:function(){var audioElement=document.getElementById('audio-player');audioElement.pause();var icon=document.getElementById("icon");icon.setAttribute("data-role","resume");icon.classList.remove("fa-pause");icon.classList.add("fa-play");$('.fa-icon').removeClass('fa-pause');$('.fa-icon').attr("data-role","playli");$('.fa-icon[audiourl="'+audioElement.src+'"]').addClass('fa-play');$('.fa-icon[audiourl="'+audioElement.src+'"]').attr("data-role","resumeli");},resume:function(){var audioElement=document.getElementById('audio-player');audioElement.play();var icon=document.getElementById("icon");icon.setAttribute("data-role","pause");icon.classList.remove("fa-play");icon.classList.add("fa-pause");$('.fa-icon').removeClass('fa-pause');$('.fa-icon').attr("data-role","playli");$('.fa-icon[audiourl="'+audioElement.src+'"]').addClass('fa-pause');$('.fa-icon[audiourl="'+audioElement.src+'"]').attr("data-role","pauseli");},next:function(){if(ips.getSetting('ps_total_tracks')>1){var audioElement=document.getElementById("audio-player");var next=$('.playlist li.active').next();var audiotitle=document.getElementById('trackTitle');if(next.length==0){next=$('.playlist li:first-child');}
var url=next.attr('audiourl');$('.playlist li').removeClass('active');next.addClass('active');audioElement.src=url;audiotitle.innerHTML=next.attr("audiotitle");this.play();$(document).trigger('contentChange',[$("#audio-player-container")]);}},previous:function(){if(ips.getSetting('ps_total_tracks')>1){var audioElement=document.getElementById("audio-player");var prev=$('.playlist li.active').prev();var audiotitle=document.getElementById('trackTitle');if(prev.length==0){prev=$('.playlist li:last-child');}
var url=prev.attr('audiourl');$('.playlist li').removeClass('active');prev.addClass('active');audioElement.src=url;audiotitle.innerHTML=prev.attr("audiotitle");this.play();}
else{var audioElement=document.getElementById("audio-player");audioElement.currentTime=0;}
$(document).trigger('contentChange',[$("#audio-player-container")]);},repeat:function(){var repeat=document.getElementById("repeat");if(localStorage.getItem('profilesongs_repeat_'+ips.getSetting('ps_member_id'))==null){repeat.style.color='#'+ips.getSetting('ps_member_colour');localStorage.setItem("profilesongs_repeat_"+ips.getSetting('ps_member_id'),1);$('#repeat').attr('data-ipstooltip-label',ips.getString('profilesongs_repeat_track_on'));}
else{repeat.style.color="";localStorage.removeItem("profilesongs_repeat_"+ips.getSetting('ps_member_id'));$('#repeat').attr('data-ipstooltip-label',ips.getString('profilesongs_repeat_track_off'));}},progressbar:function(){var audioElement=document.getElementById("audio-player");var progressBar=document.getElementById("progressbar");var drag=false;progressBar.addEventListener("mousedown",seek);progressBar.addEventListener("mousemove",seeker);progressBar.addEventListener("mouseup",seekers);progressBar.addEventListener("mouseleave",seekers);function seek(e){e.preventDefault();drag=true;var percent=e.offsetX / this.offsetWidth;audioElement.currentTime=percent*audioElement.duration;progressBar.value=percent / 100;var timeleft=document.getElementById('currentTime');var minutes="0"+Math.floor(audioElement.currentTime / 60);var seconds="0"+Math.floor(audioElement.currentTime%60);var dur=minutes.substr(-2)+":"+seconds.substr(-2);var totalminutes="0"+Math.floor(audioElement.duration / 60);var totalseconds="0"+Math.floor(audioElement.duration%60);var totaldur=totalminutes.substr(-2)+":"+totalseconds.substr(-2);timeleft.innerHTML=dur+'/'+totaldur;var progress=document.getElementById("progress");var increment=10/audioElement.duration
var percent=Math.min(increment*audioElement.currentTime*10,100);progress.style.width=percent+'%';}
function seeker(e){e.preventDefault();if(drag){var percent=e.offsetX / this.offsetWidth;audioElement.currentTime=percent*audioElement.duration;progressBar.value=percent / 100;var timeleft=document.getElementById('currentTime');var minutes="0"+Math.floor(audioElement.currentTime / 60);var seconds="0"+Math.floor(audioElement.currentTime%60);var dur=minutes.substr(-2)+":"+seconds.substr(-2);var totalminutes="0"+Math.floor(audioElement.duration / 60);var totalseconds="0"+Math.floor(audioElement.duration%60);var totaldur=totalminutes.substr(-2)+":"+totalseconds.substr(-2);timeleft.innerHTML=dur+'/'+totaldur;var progress=document.getElementById("progress");var increment=10/audioElement.duration
var percent=Math.min(increment*audioElement.currentTime*10,100);progress.style.width=percent+'%';}}
function seekers(e){e.preventDefault();drag=false;return;}},volume:function(e){var element=$(e.currentTarget);var margin=document.getElementById("margin");if($(e.currentTarget).attr('data-volume')==0){ips.utils.anim.go('fadeIn',$('#volumetoggle'));$(e.currentTarget).attr('data-volume',1);}
else{ips.utils.anim.go('fadeOut',$('#volumetoggle'));$(e.currentTarget).attr('data-volume',0);}
$(document).trigger('contentChange',[$("#audio-player-container")]);},volumeset:function(e){e.preventDefault();if(e.which!==1){return;}
var audioElement=document.getElementById("audio-player");var volumeBar=document.getElementById("volumebar");var volumeLevel=document.getElementById("volumelevel");var drag=false;volumeBar.addEventListener("mousedown",seek);volumeBar.addEventListener("mousemove",seeker);volumeBar.addEventListener("mouseup",seekers);volumeBar.addEventListener("mouseleave",seekers);function seek(e){e.preventDefault();drag=true;var percent=e.offsetX / this.offsetWidth;volumeLevel.style.width=percent*100+'%';try{if(percent*100<2){audioElement.volume=0;}
else{audioElement.volume=percent;}}
catch(err){}
var icon=$('#volume');if(percent*100<2){icon.removeClass('fa-volume-up');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-off');}
else if(percent*100<50){icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-up');icon.addClass('fa-volume-down');}
else{icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-up');}
return;}
function seeker(e){e.preventDefault();if(drag){var percent=e.offsetX / this.offsetWidth;volumeLevel.style.width=percent*100+'%';try{if(percent*100<2){audioElement.volume=0;}
else{audioElement.volume=percent;}}
catch(err){}
var icon=$('#volume');if(percent*100<1){icon.removeClass('fa-volume-up');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-off');}
else if(percent*100<50){icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-up');icon.addClass('fa-volume-down');}
else{icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-up');}}}
function seekers(e){e.preventDefault();drag=false;return;}},volumeup:function(e){e.preventDefault();if(e.which!==1){return;}
var icon=$(e.currentTarget);var audioElement=document.getElementById("audio-player");var volume=audioElement.volume;var volumeBar=document.getElementById("volumebar");var volumeLevel=document.getElementById("volumelevel");try{audioElement.volume=volume+0.1;}
catch(err){audioElement.volume=1;}
volumeLevel.style.width=audioElement.volume*100+'%';var icon=$('#volume');if(audioElement.volume*100<2){icon.removeClass('fa-volume-up');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-off');}
else if(audioElement.volume*100<50){icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-up');icon.addClass('fa-volume-down');}
else{icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-up');}},volumedown:function(e){e.preventDefault();if(e.which!==1){return;}
var icon=$(e.currentTarget);var audioElement=document.getElementById("audio-player");var volume=audioElement.volume;var volumeBar=document.getElementById("volumebar");var volumeLevel=document.getElementById("volumelevel");try{audioElement.volume=volume-0.1;}
catch(err){audioElement.volume=0;}
volumeLevel.style.width=audioElement.volume*100+'%';var icon=$('#volume');if(audioElement.volume*100<2){icon.removeClass('fa-volume-up');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-off');}
else if(audioElement.volume*100<50){icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-up');icon.addClass('fa-volume-down');}
else{icon.removeClass('fa-volume-off');icon.removeClass('fa-volume-down');icon.addClass('fa-volume-up');}},show_playlist:function(e){var playlist=$('#playlist');var icon=$(e.currentTarget);if(icon.attr('data-value')==0){icon.removeClass('fa-angle-down');icon.addClass('fa-angle-up');icon.attr('data-value',1);ips.utils.anim.go('fadeIn slow',playlist);}
else{icon.removeClass('fa-angle-up');icon.addClass('fa-angle-down');icon.attr('data-value',0);ips.utils.anim.go('fadeOut slow',playlist);}
$(document).trigger('contentChange',[$(e.currentTarget)]);},playli:function(e){var audioElement=document.getElementById("audio-player");var audio=$(e.currentTarget);var audiotitle=document.getElementById('trackTitle');audioElement.pause();audioElement.currentTime=0;if(audio.length==0){audio=$('.playlist li:first-child');}
var url=audio.attr('audiourl');$('.playlist li').removeClass('active');$('.playlist li[audiourl="'+url+'"]').addClass('active');audioElement.src=url;audiotitle.innerHTML=audio.attr("audiotitle");$('.fa-icon').removeClass('fa-pause');$('.fa-icon').addClass('fa-play');$('.fa-icon').attr("data-role","playli");audio.attr("data-role","stopli");audio.addClass("fa-pause");audio.removeClass("fa-play");audio.attr("data-role","pauseli");this.play();$(document).trigger('contentChange',[$("#audio-player-container")]);},pauseli:function(e){var audioElement=document.getElementById('audio-player');audioElement.pause();$('.fa-icon').removeClass('fa-pause');$('.fa-icon').addClass('fa-play');$('.fa-icon').attr("data-role","playli");var icon=$(e.currentTarget);icon.attr("data-role","resumeli");icon.addClass("fa-play");icon.removeClass("fa-pause");var mainIcon=document.getElementById("icon");mainIcon.setAttribute("data-role","resume");mainIcon.classList.remove("fa-pause");mainIcon.classList.add("fa-play");$(document).trigger('contentChange',[$("#audio-player-container")]);},resumeli:function(e){var audioElement=document.getElementById('audio-player');audioElement.play();$('.fa-icon').removeClass('fa-pause');$('.fa-icon').addClass('fa-play');$('.fa-icon').attr("data-role","playli");var icon=$(e.currentTarget);icon.attr("data-role","pauseli");icon.addClass("fa-pause");icon.removeClass("fa-play");var mainIcon=document.getElementById("icon");mainIcon.setAttribute("data-role","pause");mainIcon.classList.remove("fa-play");mainIcon.classList.add("fa-pause");$(document).trigger('contentChange',[$("#audio-player-container")]);},editname:function(e){var self=this;if(e.which!==1){return;}
this._editTimeout=setTimeout(function(){self._editingTitle=true;clearTimeout(this._editTimeout);var element=$(e.currentTarget);var elementID=element.attr("id");var oldTitle=element.html();element.hide();var inputSetting=$('<input/>').attr({type:'text'}).attr('data-role','editTitleField').val(element.text().trim());element.after(inputSetting);inputSetting.focus();$('#iconli[audiotitle="'+oldTitle+'"]').hide();$('#reposition[audiotitle="'+oldTitle+'"]').hide();inputSetting.on('blur',function(){inputSetting.addClass('ipsField_loading');if(inputSetting.val()==''){inputSetting.remove();element.show();self._editingTitle=false;}
else{ips.getAjax()(element.attr('href'),{method:'post',data:{do:'editTitle',title:inputSetting.val(),id:elementID}}).done(function(response){element.text(inputSetting.val());$('.playlist li[audiotitle="'+oldTitle+'"]').attr("audiotitle",inputSetting.val());$('#iconli[audiotitle="'+oldTitle+'"]').attr("audiotitle",inputSetting.val());$('#reposition[audiotitle="'+oldTitle+'"]').attr("audiotitle",inputSetting.val());$(document).trigger('contentChange',[$("#audio-player-container")]);}).fail(function(response){}).always(function(){inputSetting.remove();element.show();self._editingTitle=false;$('#iconli[audiotitle="'+inputSetting.val()+'"]').show();$('#reposition[audiotitle="'+inputSetting.val()+'"]').show();});}});inputSetting.on('keypress',function(e){if(e.keyCode==ips.ui.key.ENTER){e.stopPropagation();e.preventDefault();inputSetting.blur();return false;}});inputSetting.on('keydown',function(e){if(e.keyCode==ips.ui.key.ESCAPE){inputSetting.remove();element.show();self._editingTitle=false;return false;}});},1000);},editnameTimeout:function(e){clearTimeout(this._editTimeout);},deleteTrack:function(e){var id=$(e.currentTarget).attr('audioid');var title=$(e.currentTarget).attr('audiotitle');ips.ui.alert.show({type:'confirm',message:ips.getString('profilesongs_confirm_delete'),icon:'warn',callbacks:{ok:function(){var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files&do=deleteTrack";ips.getAjax()(ajaxurl,{type:'post',dataType:'json',data:{id:id,}}).done(function(response){if(response=='OK'){ips.utils.anim.go('fadeOut',$('.playlist li[audioid="'+id+'"]'));$(document).trigger('contentChange',[$("#audio-player-container")]);}});}}});return false;},changeColour:function(e){var showHide=$(e.currentTarget).attr('data-role');var element=document.getElementById(showHide);if($(e.currentTarget).attr('data-active')==0){ips.utils.anim.go('fadeIn',$('#changeColour'));ips.utils.anim.go('fadeIn',$('#changeColourSolid'));element.style.display='grid';$(e.currentTarget).attr('data-active',1);}
else{ips.utils.anim.go('fadeOut',$('#changeColour'));ips.utils.anim.go('fadeOut',$('#changeColourSolid'));$(e.currentTarget).attr('data-active',0);}
$(document).trigger('contentChange',[$("#audio-player-container")]);},pickColour:function(e){var element=$(e.currentTarget);var cssdiv=document.getElementById("css");var colour=element.attr('data-value');var member_id=element.attr('data-member');if(localStorage.getItem('profilesongs_repeat_'+ips.getSetting('ps_member_id'))==1){var style="<style>.memberscolour{ text-shadow: 0 0 4px #"+colour+" !important }.memberscolour:hover{ color: #"+colour+" !important }.progress{ background: #"+colour+" !important}.volume{ background: #"+colour+" !important}i#repeat.fa.fa-repeat.memberscolour{ color: #"+colour+" !important }</style>";}
else{var style="<style>.memberscolour{ text-shadow: 0 0 4px #"+colour+" !important }.memberscolour:hover{ color: #"+colour+" !important }.progress{ background: #"+colour+" !important}.volume{ background: #"+colour+" !important}</style>";}
var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files";ips.getAjax()(ajaxurl,{method:'post',data:{do:'changeColours',colour:colour,member_id:member_id}}).done(function(response){$('#css').html(style);$('#brush').attr('data-active',0);ips.utils.anim.go('fadeOut',$('#changeColour'));ips.utils.anim.go('fadeOut',$('#changeColourSolid'));}).fail(function(response){}).always(function(){$(document).trigger('contentChange',[$("#audio-player-container")]);});},pickColourSolid:function(e){var element=$(e.currentTarget);var cssdiv=document.getElementById("css");var colour=element.attr('data-value');var member_id=element.attr('data-member');var style="<style>.memberscolour{ text-shadow: none !important }.memberscolour{ color: #"+colour+" !important }.progress{ background: #"+colour+" !important}.volume{ background: #"+colour+" !important}</style>";var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files";ips.getAjax()(ajaxurl,{method:'post',data:{do:'changeColoursSolid',colour:colour,member_id:member_id}}).done(function(response){$('#css').html(style);$('#brush').attr('data-active',0);ips.utils.anim.go('fadeOut',$('#changeColour'));ips.utils.anim.go('fadeOut',$('#changeColourSolid'));}).fail(function(response){}).always(function(){$(document).trigger('contentChange',[$("#audio-player-container")]);});},autoplay:function(e){var element=$(e.currentTarget);var member_id=element.attr('data-member');var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files";ips.getAjax()(ajaxurl,{method:'post',data:{do:'autoplayToggle',member_id:member_id}}).done(function(response){if(response=='enabled'){var icon=document.getElementById("toggleAutoplay");icon.classList.remove("fa-toggle-off");icon.classList.add("fa-toggle-on");element.attr('data-enabled',1);element.attr('data-ipstooltip-label',ips.getString('profilesongs_disable_autoplay'));ips.ui.flashMsg.show(ips.getString('profilesongs_autoplay_enabled'));}
else{var icon=document.getElementById("toggleAutoplay");icon.classList.remove("fa-toggle-on");icon.classList.add("fa-toggle-off");element.attr('data-enabled',0);element.attr('data-ipstooltip-label',ips.getString('profilesongs_enable_autoplay'));ips.ui.flashMsg.show(ips.getString('profilesongs_autoplay_disabled'));}}).fail(function(response){}).always(function(){$(document).trigger('contentChange',[$("#audio-player-container")]);});},sharing:function(e){var element=$(e.currentTarget);var member_id=element.attr('data-member');var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files";if(element.attr('data-enabled')==1){ips.getAjax()(ajaxurl,{method:'post',data:{do:'sharingToggle',member_id:member_id}}).done(function(response){if(response=='enabled'){element.attr('data-enabled',1);element.attr('data-ipstooltip-label',ips.getString('profilesongs_disable_sharing'));ips.ui.flashMsg.show(ips.getString('profilesongs_sharing_enabled'));}
else{element.attr('data-enabled',0);element.attr('data-ipstooltip-label',ips.getString('profilesongs_enable_sharing'));ips.ui.flashMsg.show(ips.getString('profilesongs_sharing_disabled'));}}).fail(function(response){}).always(function(){$(document).trigger('contentChange',[$("#audio-player-container")]);});}
else{var message=ips.getString('profilesongs_confirm_enable_sharing');ips.ui.alert.show({type:'confirm',message:message,icon:'info',callbacks:{ok:function(){ips.getAjax()(ajaxurl,{method:'post',data:{do:'sharingToggle',member_id:member_id}}).done(function(response){if(response=='enabled'){element.attr('data-enabled',1);element.attr('data-ipstooltip-label',ips.getString('profilesongs_disable_sharing'));ips.ui.flashMsg.show(ips.getString('profilesongs_sharing_enabled'));}
else{element.attr('data-enabled',0);element.attr('data-ipstooltip-label',ips.getString('profilesongs_enable_sharing'));ips.ui.flashMsg.show(ips.getString('profilesongs_sharing_disabled'));}}).fail(function(response){}).always(function(){$(document).trigger('contentChange',[$("#audio-player-container")]);});}}});}},addToPlaylist:function(e){var id=$(e.currentTarget).attr('audioid');ips.ui.alert.show({type:'confirm',message:ips.getString('profilesongs_confirm_add_to_playlist'),icon:'info',callbacks:{ok:function(){var ajaxurl=ips.getSetting('baseURL')+"?app=profilesongs&module=main&controller=files&do=addToPlaylist";ips.getAjax()(ajaxurl,{type:'post',dataType:'json',data:{id:id,}}).done(function(response){if(response=='OK'){ips.ui.flashMsg.show(ips.getString('profilesongs_added_to_playlist'));ips.utils.anim.go('fadeOut',$(e.currentTarget));}});}}});return false;},});}(jQuery,_));;

